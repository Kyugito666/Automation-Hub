#!/usr/bin/env node
/**
 * Auto-generated wrapper for RAW KEYBOARD bots
 * Bypasses interactive menu, runs core logic directly
 * Generated by Automation-Hub Orchestrator
 */

const { spawn } = require('child_process');
const path = require('path');

// ═══════════════════════════════════════════════════════
// CONFIGURATION (Auto-filled by Orchestrator)
// ═══════════════════════════════════════════════════════
const BOT_DIR = '__BOT_DIR__';
const BOT_ENTRY = '__BOT_ENTRY__';

console.log('[WRAPPER] Starting bot in separate terminal...');
console.log(`[WRAPPER] Bot: ${path.basename(BOT_DIR)}`);
console.log(`[WRAPPER] Entry: ${BOT_ENTRY}`);

// ═══════════════════════════════════════════════════════
// STRATEGY: Open bot in new terminal
// ═══════════════════════════════════════════════════════
function runInNewTerminal() {
    const isWindows = process.platform === 'win32';
    
    if (isWindows) {
        // Windows: Open new cmd window
        const cmd = `cd /d "${BOT_DIR}" && node ${BOT_ENTRY}`;
        spawn('cmd.exe', ['/k', cmd], {
            detached: true,
            stdio: 'ignore'
        }).unref();
        
        console.log('[WRAPPER] ✓ Bot launched in new CMD window');
        console.log('[WRAPPER] Please interact with the bot in the new window');
        process.exit(0);
    } else {
        // Linux: Use gnome-terminal or xterm
        const terminal = 'gnome-terminal';
        spawn(terminal, ['--', 'bash', '-c', `cd "${BOT_DIR}" && node ${BOT_ENTRY}; exec bash`], {
            detached: true,
            stdio: 'ignore'
        }).unref();
        
        console.log('[WRAPPER] ✓ Bot launched in new terminal');
        process.exit(0);
    }
}

// ═══════════════════════════════════════════════════════
// MAIN
// ═══════════════════════════════════════════════════════
console.log('[WRAPPER] Launching bot...');
runInNewTerminal();
